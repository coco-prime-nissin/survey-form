<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ã‚³ã‚³ãƒ—ãƒ©ã‚¤ãƒ æ—¥é€²åº— ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆ</title>
  <style>
    body { font-family: sans-serif; padding: 2em; }
    h1 { text-align: center; margin-bottom: 1.5em; }
    .question { margin-bottom: 2em; }
    .question h2 { font-size: 1.1em; margin-bottom: 0.5em; }

    .options { display: flex; flex-direction: column; gap: 0.5em; }
    .options label {
      display: block;
      border: 1px solid #ccc;
      padding: 0.75em;
      border-radius: 5px;
      cursor: pointer;
      background: #f9f9f9;
    }
    .options input[type="radio"] { display: none; }
    .options input[type="radio"]:checked + span {
      background: #007BFF;
      color: #fff;
      border-radius: 5px;
      padding: 0.75em;
      display: block;
    }
    .options span {
      display: block;
      width: 100%;
    }

    textarea, input[type="text"] {
      width: 100%;
      box-sizing: border-box;
      padding: 0.75em;
      margin-top: 0.5em;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 1em;
    }

    button {
      display: block;
      margin: 2em auto;
      padding: 0.75em 2em;
      font-size: 1.1em;
      border: none;
      border-radius: 5px;
      background-color: #007BFF;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background-color: #0056b3;
    }

    .hidden { display: none; }
    ::placeholder { color: #888; }
  </style>
</head>
<body>
  <h1>ã‚³ã‚³ãƒ—ãƒ©ã‚¤ãƒ æ—¥é€²åº— ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆ</h1>
  <form id="surveyForm">
    <!-- æº€è¶³åº¦ -->
    <div class="question">
      <h2>æº€è¶³åº¦ã‚’æ•™ãˆã¦ãã ã•ã„</h2>
      <div class="options">
        <label><input type="radio" name="satisfaction" value="ã¨ã¦ã‚‚æº€è¶³"><span>ã¨ã¦ã‚‚æº€è¶³</span></label>
        <label><input type="radio" name="satisfaction" value="æº€è¶³"><span>æº€è¶³</span></label>
        <label><input type="radio" name="satisfaction" value="æ™®é€š"><span>æ™®é€š</span></label>
        <label><input type="radio" name="satisfaction" value="ä¸æº€"><span>ä¸æº€</span></label>
      </div>
    </div>

    <!-- ã”åˆ©ç”¨ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
    <div class="question">
      <h2>ã”åˆ©ç”¨ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’æ•™ãˆã¦ãã ã•ã„</h2>
      <div class="options">
        <label><input type="radio" name="menu" value="ãƒã‚¿ãƒ‹ãƒ†ã‚£"><span>ãƒã‚¿ãƒ‹ãƒ†ã‚£</span></label>
        <label><input type="radio" name="menu" value="ãƒ‹ãƒ¥ãƒ¼ãƒœãƒ¼ãƒ³"><span>ãƒ‹ãƒ¥ãƒ¼ãƒœãƒ¼ãƒ³</span></label>
        <label><input type="radio" name="menu" value="ãŠå®®å‚ã‚Š"><span>ãŠå®®å‚ã‚Š</span></label>
        <label><input type="radio" name="menu" value="ç™¾æ—¥ç¥ã„"><span>ç™¾æ—¥ç¥ã„</span></label>
        <label><input type="radio" name="menu" value="ãƒãƒ¼ãƒ•ãƒãƒ¼ã‚¹ãƒ‡ãƒ¼"><span>ãƒãƒ¼ãƒ•ãƒãƒ¼ã‚¹ãƒ‡ãƒ¼</span></label>
        <label><input type="radio" name="menu" value="ãƒãƒ¼ã‚¹ãƒ‡ãƒ¼"><span>ãƒãƒ¼ã‚¹ãƒ‡ãƒ¼</span></label>
        <label><input type="radio" name="menu" value="ä¸ƒäº”ä¸‰"><span>ä¸ƒäº”ä¸‰</span></label>
        <label><input type="radio" name="menu" value="å…¥åœ’ãƒ»å…¥å­¦"><span>å…¥åœ’ãƒ»å…¥å­¦</span></label>
        <label><input type="radio" name="menu" value="å’åœ’ãƒ»å’æ¥­"><span>å’åœ’ãƒ»å’æ¥­</span></label>
        <label><input type="radio" name="menu" value="æˆäººå¼"><span>æˆäººå¼</span></label>
        <label><input type="radio" name="menu" value="ã‚¦ã‚¨ãƒ‡ã‚£ãƒ³ã‚°"><span>ã‚¦ã‚¨ãƒ‡ã‚£ãƒ³ã‚°</span></label>
        <label><input type="radio" name="menu" value="å®¶æ—å†™çœŸ"><span>å®¶æ—å†™çœŸ</span></label>
        <label><input type="radio" name="menu" value="ãã®ä»–"><span>ãã®ä»–</span></label>
      </div>
      <input type="text" id="menu-other" class="hidden" name="menu-other" placeholder="ãã®ä»–ã®å ´åˆã¯ã“ã¡ã‚‰ã«ã”è¨˜å…¥ãã ã•ã„">
    </div>

    <!-- å½“åº—ã‚’çŸ¥ã£ãŸãã£ã‹ã‘ -->
    <div class="question">
      <h2>å½“åº—ã‚’çŸ¥ã£ãŸãã£ã‹ã‘ã‚’æ•™ãˆã¦ãã ã•ã„</h2>
      <div class="options">
        <label><input type="radio" name="source" value="Googleæ¤œç´¢"><span>Googleæ¤œç´¢</span></label>
        <label><input type="radio" name="source" value="Googleå£ã‚³ãƒŸ"><span>Googleå£ã‚³ãƒŸ</span></label>
        <label><input type="radio" name="source" value="Instagram"><span>Instagram</span></label>
        <label><input type="radio" name="source" value="ç´¹ä»‹"><span>ç´¹ä»‹ï¼ˆã”å®¶æ—ãƒ»ã”å‹äººãªã©ï¼‰</span></label>
        <label><input type="radio" name="source" value="ãƒªãƒ”ãƒ¼ãƒˆ"><span>ãƒªãƒ”ãƒ¼ãƒˆ</span></label>
        <label><input type="radio" name="source" value="ãã®ä»–"><span>ãã®ä»–</span></label>
      </div>
      <input type="text" id="source-other" class="hidden" name="source-other" placeholder="ãã®ä»–ã®å ´åˆã¯ã“ã¡ã‚‰ã«ã”è¨˜å…¥ãã ã•ã„">
    </div>

    <!-- ã‚³ãƒ¡ãƒ³ãƒˆ -->
    <div class="question">
      <h2>ã©ã®ã‚ˆã†ãªæ’®å½±ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã§ã”åˆ©ç”¨é ‚ã„ãŸã‹ã”è¨˜å…¥å¾Œã€æ„Ÿæƒ³ã‚’ã”è¨˜å…¥ãã ã•ã„</h2>
      <textarea id="comment" name="comment" rows="6"
        placeholder="ï¼ˆä¾‹ï¼‰ä¸ƒäº”ä¸‰ã®æ’®å½±ã§ã”åˆ©ç”¨ã•ã›ã¦ã„ãŸã ãã¾ã—ãŸã€‚ã¯ã˜ã‚ã¯ç·Šå¼µã—ã¦ã„ãŸå¨˜ã‚‚ã™ãã«ç¬‘é¡”ã«ãªã‚Šã€è‡ªç„¶ãªè¡¨æƒ…ã‚’ãŸãã•ã‚“æ’®ã£ã¦é ‚ãã¾ã—ãŸã€‚å¨˜ã‚‚æ¥½ã—ãã†ã«ã—ã¦ã„ã¦ã€ã“ã¡ã‚‰ã§ãŠé¡˜ã„ã—ã¦æœ¬å½“ã«è‰¯ã‹ã£ãŸã§ã™ã€‚"></textarea>
    </div>

    <button type="submit">é€ä¿¡</button>
  </form>

  <!-- EmailJS -->
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
  <script>
    emailjs.init("YOUR_PUBLIC_KEY"); // â†å·®ã—æ›¿ãˆ

    const menuRadios = document.querySelectorAll('input[name="menu"]');
    const menuOther = document.getElementById("menu-other");
    menuRadios.forEach(radio => {
      radio.addEventListener("change", () => {
        menuOther.classList.toggle("hidden", !(radio.value === "ãã®ä»–" && radio.checked));
      });
    });

    const sourceRadios = document.querySelectorAll('input[name="source"]');
    const sourceOther = document.getElementById("source-other");
    sourceRadios.forEach(radio => {
      radio.addEventListener("change", () => {
        sourceOther.classList.toggle("hidden", !(radio.value === "ãã®ä»–" && radio.checked));
      });
    });

    document.getElementById("surveyForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const satisfaction = document.querySelector('input[name="satisfaction"]:checked')?.value || "";
      let menu = document.querySelector('input[name="menu"]:checked')?.value || "";
      if (menu === "ãã®ä»–") menu = menuOther.value;
      let source = document.querySelector('input[name="source"]:checked')?.value || "";
      if (source === "ãã®ä»–") source = sourceOther.value;
      const comment = document.getElementById("comment").value;

      // ğŸ“© EmailJSã§é€ä¿¡ï¼ˆãŠåº—ã«å±Šãï¼‰
      emailjs.send("YOUR_SERVICE_ID", "YOUR_TEMPLATE_ID", {
        satisfaction: satisfaction,
        menu: menu,
        source: source,
        comment: comment
      }).then(function() {
        // thanks.html ã«æ¸¡ã™ç”¨
        localStorage.setItem("satisfaction", satisfaction);
        localStorage.setItem("menu", menu);
        localStorage.setItem("source", source);
        localStorage.setItem("comment", comment);
        window.location.href = "thanks.html";
      }, function(error) {
        console.error("é€ä¿¡å¤±æ•—:", error);
        alert("é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚");
      });
    });
  </script>
</body>
</html>
