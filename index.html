<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ココプライム日進店 アンケート</title>
  <style>
    body { font-family: sans-serif; padding: 20px; background: #f5f5f5; }
    form { background: #fff; padding: 20px; border-radius: 10px; max-width: 600px; margin: auto; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    textarea { width: 100%; height: 150px; padding: 10px; border-radius: 5px; border: 1px solid #ccc; resize: none; }
    button { background: #007bff; color: #fff; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; }
    button:hover { background: #0056b3; }
  </style>
</head>
<body>
  <form id="survey-form">
    <h2>ココプライム日進店 アンケート</h2>
    <p>質問1：今回の総合満足度を教えてください</p>
    <label><input type="radio" name="satisfaction" value="満足" required> 満足</label><br/>
    <label><input type="radio" name="satisfaction" value="やや満足"> やや満足</label><br/>
    <label><input type="radio" name="satisfaction" value="やや不満"> やや不満</label><br/>
    <label><input type="radio" name="satisfaction" value="不満"> 不満</label>

    <p>質問2：ご利用メニューをお選びください</p>
    <select name="menu" required>
      <option value="">選択してください</option>
      <option value="七五三">七五三</option>
      <option value="成人式">成人式</option>
      <option value="ニューボーン">ニューボーン</option>
      <option value="マタニティ">マタニティ</option>
      <option value="お宮参り">お宮参り</option>
      <option value="ベビーフォト">ベビーフォト</option>
      <option value="入園・入学・卒園・卒業">入園・入学・卒園・卒業</option>
      <option value="家族写真">家族写真</option>
      <option value="ウエディング">ウエディング</option>
      <option value="その他">その他</option>
    </select>

    <p>質問3：良かったこと・悪かったことなど感想をお願いします</p>
    <textarea name="comment" placeholder="例：七五三の撮影をしました。スタッフの方がとても親切で、子どもも楽しんで撮影できました！また利用したいです。" required></textarea>
    <br/><br/>
    <button type="submit">送信</button>
  </form>

  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@2/dist/email.min.js"></script>
  <script>
    (function() {
      emailjs.init("BTw7flRrgTq7RVX7v");
    })();

    document.getElementById('survey-form').addEventListener('submit', function(event) {
      event.preventDefault();

      const satisfaction = document.querySelector('input[name="satisfaction"]:checked').value;
      const menu = document.querySelector('select[name="menu"]').value;
      const comment = document.querySelector('textarea[name="comment"]').value;

      const templateParams = {
        satisfaction,
        menu,
        comment
      };

      emailjs.send('service_4ypfuxh', 'survey_template', templateParams)
        .then(function(response) {
          window.location.href = 'thanks.html?satisfaction=' + encodeURIComponent(satisfaction)
              + '&menu=' + encodeURIComponent(menu)
              + '&comment=' + encodeURIComponent(comment);
        }, function(error) {
          alert('送信に失敗しました。');
        });
    });
  </script>
</body>
</html>
